{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'Header',\n\n  data() {\n    return {\n      keyword: ''\n    };\n  },\n\n  methods: {\n    // 搜索按钮的回调函数，向Search路由进行跳转\n    goSearch() {\n      // 字符串格式\n\n      /* this.$router.push(\r\n        '/search/' + this.keyword + '?k=' + this.keyword.toUpperCase()\r\n      ) */\n      // 模板字符串格式\n      // this.$route.push(`/search/${this.keyword}?k=${this.keyword.toUpperCase()}`)\n      // 对象格式\n      // params传递空串\n      // this.$router.push({\n      //   name: 'search',\n      //   params: { keyword: '' || undefined },\n      //   query: { k: this.keyword.toUpperCase() },\n      // })\n      // 搜索内容时,判断是否有query参数(三级列表的分类数据)\n      if (this.$route.query) {\n        let location = {\n          name: 'search',\n          params: {\n            keyword: this.keyword || undefined\n          }\n        };\n        location.query = this.$route.query; //如果有就带上\n\n        this.$router.push(location);\n      }\n    },\n\n    async logOut() {\n      // 发请求通知服务器退出登录\n      // 清除项目中的数据\n      try {\n        await this.$store.dispatch('userLogout');\n        this.$router.push('/home');\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n\n  },\n  computed: {\n    userName() {\n      return this.$store.state.user.userInfo.name;\n    }\n\n  },\n\n  mounted() {\n    this.$bus.$on('clear', () => {\n      this.keyword = '';\n    });\n  }\n\n};","map":null,"metadata":{},"sourceType":"module"}