{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { reqAddOrUpdateShopCart, reqGoodsInfo } from \"@/api\";\nimport { getUUID } from \"@/utils/uuid_token\";\nconst state = {\n  goodInfo: {},\n  uuid_token: getUUID()\n};\nconst mutations = {\n  GETGOODINFO(state, goodInfo) {\n    state.goodInfo = goodInfo;\n  }\n\n};\nconst actions = {\n  async getGoodInfo({\n    commit\n  }, skuId) {\n    let result = await reqGoodsInfo(skuId);\n\n    if (result.code == 200) {\n      commit('GETGOODINFO', result.data);\n    }\n  },\n\n  async addOrUpdateShopCart({\n    commit\n  }, {\n    skuId,\n    skuNum\n  }) {\n    let result = await reqAddOrUpdateShopCart(skuId, skuNum); // 服务器写入数据成功，不需要返回其他数，只需要返回code==200\n    // 所以不需要往state中存数据\n    // console.log(result);\n\n    if (result.code == 200) {\n      return Promise.resolve('加入购物车成功');\n    } else {\n      return Promise.reject(new Error('加入购物车失败'));\n    }\n  }\n\n};\nconst getters = {\n  categoryView(state) {\n    // goodInfo可能是空对象，导致categoryView为undefined\n    return state.goodInfo.categoryView || {};\n  },\n\n  skuInfo(state) {\n    // 同上\n    return state.goodInfo.skuInfo || {};\n  },\n\n  spuSaleAttrList(state) {\n    return state.goodInfo.spuSaleAttrList || [];\n  }\n\n};\nexport default {\n  state,\n  mutations,\n  actions,\n  getters\n};","map":null,"metadata":{},"sourceType":"module"}